"use strict";(self["webpackChunk_07_journal_app"]=self["webpackChunk_07_journal_app"]||[]).push([[182],{7705:function(e,t,n){n.r(t),n.d(t,{default:function(){return M}});var a=n(3396),r=n(7139),l=n(9242);const i=e=>((0,a.dD)("data-v-290deb44"),e=e(),(0,a.Cn)(),e),s={class:"entry-title d-flex justify-content-between p-2"},o={class:"text-success fs-3 fw-bold"},c={class:"mx-1 fs-3"},u={class:"mx-2 fs-4 fw-light"},d=(0,a.Uk)(" Borrar "),y=i((()=>(0,a._)("i",{class:"fa fa-trash-alt"},null,-1))),h=[d,y],p=(0,a.Uk)(" Subir foto "),m=i((()=>(0,a._)("i",{class:"fa fa-upload"},null,-1))),f=[p,m],g=i((()=>(0,a._)("hr",null,null,-1))),w={class:"d-flex flex-column px-3 h-75"},b=["src"],v=["src"];function _(e,t,n,i,d,y){const p=(0,a.up)("Fab");return(0,a.wg)(),(0,a.iD)(a.HY,null,[d.entry?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[(0,a._)("div",s,[(0,a._)("div",null,[(0,a._)("span",o,(0,r.zw)(y.day),1),(0,a._)("span",c,(0,r.zw)(y.month),1),(0,a._)("span",u,(0,r.zw)(y.yearDay),1)]),(0,a._)("div",null,[(0,a.wy)((0,a._)("input",{type:"file",onChange:t[0]||(t[0]=(...e)=>y.onSelectedImage&&y.onSelectedImage(...e)),ref:"imageSelector",accept:"image/png, image/jpeg"},null,544),[[l.F8,!1]]),d.entry.id?((0,a.wg)(),(0,a.iD)("button",{key:0,class:"btn btn-danger mx-2",onClick:t[1]||(t[1]=(...e)=>y.onDeleteEntry&&y.onDeleteEntry(...e))},h)):(0,a.kq)("",!0),(0,a._)("button",{class:"btn btn-primary",onClick:t[2]||(t[2]=(...e)=>y.onSelectImage&&y.onSelectImage(...e))},f)])]),g,(0,a._)("div",w,[(0,a.wy)((0,a._)("textarea",{"onUpdate:modelValue":t[3]||(t[3]=e=>d.entry.text=e),placeholder:"¿Qué sucedió hoy?"},null,512),[[l.nr,d.entry.text]])]),d.entry.picture&&!d.localImage?((0,a.wg)(),(0,a.iD)("img",{key:0,src:d.entry.picture,alt:"entry-picture",class:"img-thumbnail"},null,8,b)):(0,a.kq)("",!0),d.localImage?((0,a.wg)(),(0,a.iD)("img",{key:1,src:d.localImage,alt:"entry-picture",class:"img-thumbnail"},null,8,v)):(0,a.kq)("",!0)],64)):(0,a.kq)("",!0),(0,a.Wm)(p,{icon:"fa-save","onOn:click":y.saveEntry},null,8,["onOn:click"])],64)}var E=n(65),D=n(2492),k=n.n(D);const x=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],I=["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"],S=e=>{const t=new Date(e);return{day:t.getDate(),month:x[t.getMonth()],yearDay:`${t.getFullYear()}, ${I[t.getDay()]}`}};var C=S,F=n(6265),j=n.n(F);const O=async e=>{if(e)try{const t=new FormData;t.append("upload_preset","curso-vue"),t.append("file",e);const n="https://api.cloudinary.com/v1_1/dea7hrlwi/image/upload",{data:a}=await j().post(n,t);return a.secure_url}catch(t){return null}};var $=O,q={name:"EntryView",props:{id:{type:String,required:!0}},components:{Fab:(0,a.RC)((()=>n.e(967).then(n.bind(n,8967))))},data(){return{entry:null,localImage:null,file:null}},computed:{...(0,E.Se)("journal",["getEntryById"]),day(){const{day:e}=C(this.entry.date);return e},month(){const{month:e}=C(this.entry.date);return e},yearDay(){const{yearDay:e}=C(this.entry.date);return e}},methods:{...(0,E.nv)("journal",["updateEntry","createEntry","deleteEntry"]),loadEntry(){let e;if("new"===this.id)e={text:"",date:(new Date).getTime()};else if(e=this.getEntryById(this.id),!e)return this.$router.push({name:"no-entry"});this.entry=e},async saveEntry(){k().fire({title:"Espere por favor",allowOutsideClick:!1}),k().showLoading();const e=await $(this.file);if(this.entry.picture=e,this.entry.id)await this.updateEntry(this.entry);else{const e=await this.createEntry(this.entry);this.$router.push({name:"entry",params:{id:e}})}this.file=null,k().fire("Guardado","Entrada registrada con éxito","success")},async onDeleteEntry(){const{isConfirmed:e}=await k().fire({title:"¿Está seguro?",text:"Una vez borrado, no se puede recuperar",showDenyButton:!0,confirmButtonText:"Si, estoy seguro"});e&&(k().fire({title:"Espere por favor",allowOutsideClick:!1}),k().showLoading(),await this.deleteEntry(this.entry.id),this.$router.push({name:"no-entry"}),k().fire("Eliminado","","success"))},onSelectedImage(e){const t=e.target.files[0];if(!t)return this.localImage=null,void(this.file=null);this.file=t;const n=new FileReader;n.onload=()=>this.localImage=n.result,n.readAsDataURL(t)},onSelectImage(){this.$refs.imageSelector.click()}},created(){this.loadEntry()},watch:{id(){this.loadEntry()}}},z=n(89);const B=(0,z.Z)(q,[["render",_],["__scopeId","data-v-290deb44"]]);var M=B},1762:function(e,t,n){n.r(t),n.d(t,{default:function(){return u}});var a=n(3396);const r=e=>((0,a.dD)("data-v-99f79e40"),e=e(),(0,a.Cn)(),e),l=r((()=>(0,a._)("div",{class:"d-flex justify-content-center"},[(0,a._)("h1",{class:"align-self-center"},"No hay nada seleccionado")],-1)));function i(e,t,n,r,i,s){const o=(0,a.up)("Fab");return(0,a.wg)(),(0,a.iD)(a.HY,null,[l,(0,a.Wm)(o,{"onOn:click":s.createNewEntry},null,8,["onOn:click"])],64)}var s={name:"NoEntrySelected",components:{Fab:(0,a.RC)((()=>n.e(967).then(n.bind(n,8967))))},methods:{createNewEntry(){this.$router.push({name:"entry",params:{id:"new"}})}}},o=n(89);const c=(0,o.Z)(s,[["render",i],["__scopeId","data-v-99f79e40"]]);var u=c}}]);
//# sourceMappingURL=daybook-no-entry.104b35e0.js.map